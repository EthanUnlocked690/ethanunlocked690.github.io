<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shorts</title>
<html>
<head>
<style>
    body {
        margin:0px;
        background-image: url('webpage-backdrop.jpg');
    }
</style>
<style>
ul {
    list-style-type: none;
    margin: 0px;
    padding: 0px;
    overflow: hidden;
    background-color: #003366;
}

li {
    float: left;
}

li a {
    display: block;
    color: white;
    text-align: center;
    padding: 14px 16px;
    text-decoration: none;
}

li a:hover {
    background-color: #111;
}
</style>
</head>
<body>
<style>
    .section {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        margin: 10px;
    }
    .video-container {
        background-image: url('webpage-backdrop.jpg');
        margin: 10px;
        padding: 20px;
        font-size: 30px;
    }
    .bouncy-text {
        font-size: 50px !important;
        font-weight: bold;
        text-align: center;
    }
    .bouncy-text span {
        animation: bounce 0.5s infinite alternate;
        display: inline-block;
        background: linear-gradient(to bottom, #ff6600, #ffcc33);
        -webkit-background-clip: text;
        color: transparent;
    }
    @keyframes bounce {
        0% { transform: translateY(0); }
        100% { transform: translateY(-10px); }
    }
    .bouncy-text span:nth-child(1) { animation-delay: 0s; }
    .bouncy-text span:nth-child(2) { animation-delay: 0.05s; }
    .bouncy-text span:nth-child(3) { animation-delay: 0.1s; }
    .bouncy-text span:nth-child(4) { animation-delay: 0.15s; }
    .bouncy-text span:nth-child(5) { animation-delay: 0.20s; }
    .bouncy-text span:nth-child(6) { animation-delay: 0.25s; }
    .bouncy-text span:nth-child(7) { animation-delay: 0.30s; }
    .bouncy-text span:nth-child(8) { animation-delay: 0.35s; }
    .bouncy-text span:nth-child(9) { animation-delay: 0.40s; }
    .bouncy-text span:nth-child(10) { animation-delay: 0.45s; }
    .bouncy-text span:nth-child(11) { animation-delay: 0.50s; }
    .bouncy-text span:nth-child(12) { animation-delay: 0.55s; }
    .bouncy-text span:nth-child(13) { animation-delay: 0.60s; }
    .bouncy-text span:nth-child(14) { animation-delay: 0.65s; }
</style>
<ul>
    <li><a class="active" href="index.html">Home</a></li>
    <li><a href="news.html">News</a></li>
    <li><a href="subscribe.html">Subscribe</a></li>
    <li><a href="about.html">About</a></li>
    <li><a href="short.html" style="background-color:blue;">Shorts</a></li>
    <li><a href="videos.html">Video Gallery</a></li>
    <li><a href="images.html">Image Gallery</a></li>
    <li><a href="animate.html">LEGO Animations</a></li>
    <li><a href="tutorial.html">Tutorials & Speedruns</a></li>
    <li><a href="turtle.html">Others</a></li>
</ul>
<div style="width:100%">
    <div class="bouncy-text">
        <span>S</span><span>H</span><span>O</span><span>R</span><span>T</span><span>S</span>
    </div>
</div>
<h1 style="color:white;" id="short-count">Short count: Loading...</h1>
<div id="shorts-container">
    </div>
<h2 style="color:white;">For more shorts, </h2><a href="https://www.youtube.com/@ethanandisabella4098/shorts">Click here!</a>

<script>
    const channelId = 'UC2uX-h-YlU0_jU2Yy3s0E-A';
    const shortsContainer = document.getElementById('shorts-container');
    const shortCountElement = document.getElementById('short-count');
    const maxShorts = 20;

    async function fetchShorts() {
        try {
            const response = await fetch(`https://www.youtube.com/feeds/videos.xml?channel_id=${channelId}`);
            if (!response.ok) {
                throw new Error('Failed to fetch YouTube feed.');
            }
            const text = await response.text();
            const parser = new DOMParser();
            const xmlDoc = parser.parseFromString(text, "text/xml");
            const entries = xmlDoc.getElementsByTagName('entry');
            let shortsAdded = 0;

            let html = '';
            for (let i = 0; i < entries.length && shortsAdded < maxShorts; i++) {
                const entry = entries[i];
                const link = entry.getElementsByTagName('link')[0].getAttribute('href');
                const videoId = link.split('v=')[1];

                // Check if the video is likely a short by its aspect ratio
                const group = entry.getElementsByTagName('media:group')[0];
                const thumbnail = group.getElementsByTagName('media:thumbnail')[0];
                const width = thumbnail.getAttribute('width');
                const height = thumbnail.getAttribute('height');

                if (parseInt(height) > parseInt(width) && shortsAdded < maxShorts) {
                    if (shortsAdded % 2 === 0) {
                        if (shortsAdded > 0) {
                            html += '</div>';
                        }
                        html += '<div class="section">';
                    }
                    html += `<div class="video-container"><iframe width="526" height="935" src="https://www.youtube.com/embed/${videoId}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe></div>`;
                    shortsAdded++;
                }
            }
            if (shortsAdded % 2 !== 0) {
                html += '<div></div>'; // Add empty div for layout
            }
            html += '</div>';

            shortsContainer.innerHTML = html;
            shortCountElement.textContent = `Short count: ${shortsAdded}`;

        } catch (error) {
            console.error(error);
            shortCountElement.textContent = "Short count: Error loading videos.";
        }
    }

    fetchShorts();
</script>

<script>
function goBack() {
    window.history.back()
}
</script>
<body>
<input type="button" value="Back" onclick="goBack()">
</body>
<script>
function goForward() {
    window.history.forward()
}
</script>
<body>
<input type="button" value="Forward" onclick="goForward()">
</body>
</html>
