<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact</title>
    <!-- We're using Tailwind CSS for a modern look, but also including the user's custom styles -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* This is the user's original background style */
        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            background-image: url('webpage-backdrop.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            min-height: 100vh;
        }

        /* Container to center and stack the buttons */
        .button-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            gap: 2rem; /* Adds space between the buttons */
            padding: 1rem;
        }

        /* Styling for the massive buttons */
        .giant-button {
            width: 80%;
            max-width: 500px;
            padding: 3rem 2rem; /* Massive padding to make it big */
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 1rem;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.3);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .giant-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 20px rgba(0, 0, 0, 0.4);
        }

        /* Specific colors for each button */
        #button1 {
            background-color: #3b82f6; /* Tailwind blue-500 */
        }
        #button2 {
            background-color: #10b981; /* Tailwind green-500 */
        }

        /* Custom message box for desktop/PC users */
        .message-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.85);
            color: white;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 9999;
            text-align: center;
            display: none; /* Hidden by default */
            backdrop-filter: blur(5px);
        }
        .message-box button {
            margin-top: 1rem;
            padding: 0.5rem 1.5rem;
            background-color: #3b82f6;
            color: white;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
        }

        /* Styling for the new email and SMS choice modals */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.75);
            display: none; /* Hidden by default */
            align-items: center;
            justify-content: center;
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            width: 95%;
            max-width: 500px;
            background-color: #1f2937; /* Tailwind gray-800 */
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            text-align: center;
        }

        .modal-content h3 {
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            margin-bottom: 1.5rem;
        }

        .modal-content button {
            width: 100%;
            padding: 1rem;
            margin-bottom: 1rem;
            font-size: 1.25rem;
            font-weight: 500;
            color: white;
            border-radius: 0.75rem;
            transition: background-color 0.2s, transform 0.2s;
        }

        .modal-content button:hover {
            transform: translateY(-2px);
        }

        .modal-content .close-button {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 2rem;
            color: #d1d5db; /* Tailwind gray-400 */
            cursor: pointer;
            line-height: 1;
        }
        .modal-content .close-button:hover {
            color: #ef4444; /* Tailwind red-500 */
        }

        /* Specific button colors for email clients */
        .gmail-button { background-color: #ea4335; }
        .yahoo-button { background-color: #6a00c6; }
        .outlook-button { background-color: #0078d4; }
        .default-button { background-color: #4b5563; }
        
        /* Specific colors for SMS options */
        .conversation-button { background-color: #22c55e; /* Tailwind green-500 */ }
        .questions-button { background-color: #f97316; /* Tailwind orange-500 */ }
    </style>
</head>
<body>
    <!-- Custom Message Box, instead of using alert() -->
    <div id="message-box" class="message-box">
        <p id="message-text"></p>
        <button onclick="hideMessage()">OK</button>
    </div>

    <!-- Email Choice Modal -->
    <div id="email-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="hideEmailModal()">&times;</span>
            <h3>Choose your email client</h3>
            <button class="gmail-button" onclick="openEmail('gmail')">Gmail</button>
            <button class="yahoo-button" onclick="openEmail('yahoo')">Yahoo Mail</button>
            <button class="outlook-button" onclick="openEmail('outlook')">Outlook/Hotmail (Web)</button>
            <button class="default-button" onclick="openEmail('default')">Default Mail App</button>
        </div>
    </div>

    <!-- SMS Choice Modal -->
    <div id="sms-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="hideSmsModal()">&times;</span>
            <h3>How would you like to chat?</h3>
            <button class="conversation-button" onclick="openSms('conversation')">Normal Conversation</button>
            <button class="questions-button" onclick="openSms('questions')">Questions</button>
        </div>
    </div>

    <!-- Container to hold and center the buttons -->
    <div class="button-container">
        <!-- The email button. The href attribute has been removed. -->
        <button class="giant-button" id="button1" onclick="showEmailModal()">
            ‚úâÔ∏èEmail
        </button>
        <!-- The SMS button. The href attribute has been removed. -->
        <button class="giant-button" id="button2" onclick="handlePhoneClick()">
            üí¨SMS
        </button>
    </div>

    <script>
        // Get modal elements
        const emailModal = document.getElementById('email-modal');
        const smsModal = document.getElementById('sms-modal');

        // Function to show the custom message box
        function showMessage(text) {
            const messageBox = document.getElementById('message-box');
            const messageText = document.getElementById('message-text');
            messageText.textContent = text;
            messageBox.style.display = 'block';
        }

        // Function to hide the custom message box
        function hideMessage() {
            const messageBox = document.getElementById('message-box');
            messageBox.style.display = 'none';
        }

        // Functions for the email choice modal
        function showEmailModal() {
            emailModal.style.display = 'flex';
        }

        function hideEmailModal() {
            emailModal.style.display = 'none';
        }

        function openEmail(client) {
            const emailAddress = "ethan.unlocked@gmail.com";
            const subject = "Contact from TheUnlockedWeb";

            // Hide the modal after a choice is made
            hideEmailModal();

            switch(client) {
                case 'gmail':
                    window.open(`https://mail.google.com/mail/?view=cm&fs=1&to=${emailAddress}&su=${encodeURIComponent(subject)}`, '_blank');
                    break;
                case 'yahoo':
                    window.open(`https://mail.yahoo.com/d/compose-mail?to=${emailAddress}&subject=${encodeURIComponent(subject)}`, '_blank');
                    break;
                case 'outlook':
                    // Updated the URL to be more stable and less prone to sign-in loop issues.
                    // This new format should more reliably open the compose window.
                    window.open(`https://outlook.live.com/mail/0/compose?to=${emailAddress}&subject=${encodeURIComponent(subject)}`, '_blank');
                    break;
                case 'default':
                default:
                    // This is the original 'mailto' link that opens the desktop app
                    window.location.href = `mailto:${emailAddress}?subject=${encodeURIComponent(subject)}`;
                    break;
            }
        }

        // Functions for the SMS choice modal
        function showSmsModal() {
            const now = new Date();
            const estOffset = now.getTimezoneOffset() + 300; // TimezoneOffset is minutes from UTC. EST is 300 minutes (5 hours).
            const estHour = (now.getUTCHours() - 5 + 24) % 24;
            const estMinute = now.getUTCMinutes();
            const dayOfWeek = now.getDay(); // 0 = Sunday, 1 = Monday, ..., 6 = Saturday

            let canMessage = false;
            let disabledMessage = "";

            // Check if it's a weekend (Saturday or Sunday)
            if (dayOfWeek === 0 || dayOfWeek === 6) {
                // Weekend hours: 7am to 7pm EST
                if (estHour >= 7 && estHour < 19) {
                    canMessage = true;
                } else {
                    disabledMessage = "Sorry, messages cannot be sent between 7 PM and 7 AM EST on weekends.";
                }
            } else { // Weekdays (Monday to Friday)
                // Weekday hours: 3:01pm to 4:59pm EST
                const totalMinutes = estHour * 60 + estMinute;
                const enabledStart = 15 * 60 + 1; // 3:01 PM in minutes
                const enabledEnd = 16 * 60 + 59; // 4:59 PM in minutes
                
                if (totalMinutes >= enabledStart && totalMinutes <= enabledEnd) {
                    canMessage = true;
                } else {
                    disabledMessage = "Sorry, messages cannot be sent between 5 PM and 3 PM EST on weekdays.";
                }
            }
            
            if (canMessage) {
                smsModal.style.display = 'flex';
            } else {
                showMessage(disabledMessage);
            }
        }

        function hideSmsModal() {
            smsModal.style.display = 'none';
        }

        function openSms(option) {
            const phoneNumber = "0490892714";
            let message = "";

            // Hide the modal after a choice is made
            hideSmsModal();

            switch(option) {
                case 'conversation':
                    message = "Hello EthanUnlocked! I have found your website contact page and want to chat with you! Say hello!";
                    break;
                case 'questions':
                    message = "Hello EthanUnlocked! I have found your contact page on your website and want to ask some questions. Get your answers ready!";
                    break;
            }
            const encodedMessage = encodeURIComponent(message);
            window.location.href = `sms:${phoneNumber}?body=${encodedMessage}`;
        }

        // Function to handle the initial SMS button click with device detection and time check
        function handlePhoneClick() {
            // The user agent string helps us detect the type of device
            const userAgent = navigator.userAgent || navigator.vendor || window.opera;
            
            // Check if the user is on an iOS device (iPhone or iPad)
            if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                // If it's a mobile device, show the SMS modal
                showSmsModal();
            } else {
                // If not on an iOS device, show the custom message box
                showMessage("Only available on Phone, iPad, or any form of messaging");
            }
        }
    </script>
</body>
</html>
