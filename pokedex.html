<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pokédex - The Ultimate Version</title>
<link rel="preconnect" href="https://fonts.googleapis.com/">
<link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
<link href="./Pokédex - The Ultimate Version_files/css2" rel="stylesheet">
<style>
/* General Body Styles */
body {
    font-family: 'Roboto Mono', monospace;
    background-color: #f0f0f0;
    color: #333;
    margin: 0;
    padding: 20px;
    text-align: center;
    background-image: url('pokedex-top.png'), url('pokedex-bottom.png');
    background-position: top center, bottom center;
    background-repeat: no-repeat;
    background-size: contain;
}

h1 {
    color: #e4000f;
    text-transform: uppercase;
    letter-spacing: 2px;
}

#loadingMessage {
    font-size: 1.2rem;
    color: #555;
    display: none;
}

#loadingMessage.error {
    color: #e4000f;
}

#retryButton {
    background-color: #e4000f;
    color: #fff;
    border: none;
    padding: 10px 20px;
    border-radius: 25px;
    font-family: 'Roboto Mono', monospace;
    font-size: 16px;
    cursor: pointer;
    margin-top: 10px;
    display: none;
}

#retryButton:hover {
    background-color: #c2000d;
}

/* Top Navbar */
.top-navbar {
    background-color: #333;
    color: #fff;
    padding: 10px;
    text-align: left;
}

.top-navbar a {
    color: #fff;
    text-decoration: none;
    font-size: 16px;
}

.nav-container {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    margin-bottom: 20px;
    gap: 10px;
}

.nav-button {
    background-color: #333;
    color: #fff;
    border: none;
    padding: 10px 20px;
    border-radius: 25px;
    font-family: 'Roboto Mono', monospace;
    font-size: 16px;
    cursor: pointer;
    transition: background-color 0.3s;
}

.nav-button:hover,
.nav-button.active {
    background-color: #e4000f;
}

/* Search Bar */
.search-container {
    margin-bottom: 20px;
}

#searchInput {
    width: 80%;
    max-width: 400px;
    padding: 10px 15px;
    border: 2px solid #ccc;
    border-radius: 25px;
    font-size: 16px;
    font-family: 'Roboto Mono', monospace;
    outline: none;
    transition: border-color 0.3s;
}

#searchInput:focus {
    border-color: #e4000f;
}

/* Pokédex Container (Grid) */
.pokedex-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    padding: 20px;
    max-width: 1200px;
    margin: 0 auto;
}

/* Pokémon Card */
.pokemon-card {
    background-color: #fff;
    border-radius: 15px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    padding: 20px;
    text-align: center;
    transition: transform 0.2s, box-shadow 0.2s;
    cursor: pointer;
}

.pokemon-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 16px rgba(0,0,0,0.2);
}

.pokemon-card .pokemon-id {
    font-size: 14px;
    color: #888;
    font-weight: bold;
}

.pokemon-card img {
    width: 150px;
    height: 150px;
    margin: 10px auto;
    display: block;
}

.pokemon-card .pokemon-name {
    margin: 15px 0 10px;
    font-size: 22px;
    font-weight: bold;
    text-transform: capitalize;
}

/* Types Container */
.pokemon-types {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 10px;
}

.type {
    padding: 5px 15px;
    border-radius: 15px;
    color: white;
    font-size: 14px;
    text-transform: uppercase;
    font-weight: bold;
}

/* Pokémon Type Colors */
.type.normal { background-color: #A8A77A; }
.type.fire { background-color: #EE8130; }
.type.water { background-color: #6390F0; }
.type.electric { background-color: #F7D02C; }
.type.grass { background-color: #7AC74C; }
.type.ice { background-color: #96D9D6; }
.type.fighting { background-color: #C22E28; }
.type.poison { background-color: #A33EA1; }
.type.ground { background-color: #E2BF65; }
.type.flying { background-color: #A98FF3; }
.type.psychic { background-color: #F95587; }
.type.bug { background-color: #A6B91A; }
.type.rock { background-color: #B6A136; }
.type.ghost { background-color: #735797; }
.type.dragon { background-color: #6F35FC; }
.type.dark { background-color: #705746; }
.type.steel { background-color: #B7B7CE; }
.type.fairy { background-color: #D685AD; }

/* Modal Styles */
.modal {
    display: none;
    position: fixed;
    z-index: 10;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.4);
    backdrop-filter: blur(5px);
}

.modal-content {
    background-color: #fff;
    margin: 10% auto;
    padding: 30px;
    border: 1px solid #888;
    width: 80%;
    max-width: 600px;
    border-radius: 20px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    position: relative;
    animation-name: animatetop;
    animation-duration: 0.4s;
    text-align: left;
}

@keyframes animatetop {
    from {top: -300px; opacity: 0}
    to {top: 0; opacity: 1}
}

.close-button {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
}

.close-button:hover,
.close-button:focus {
    color: black;
    text-decoration: none;
}

.modal-info h2 {
    text-align: center;
    text-transform: capitalize;
    font-size: 2.5rem;
    margin-top: 0;
}

.modal-info .modal-id {
    font-size: 1.5rem;
    color: #888;
    text-align: center;
}

.modal-info .modal-image {
    display: block;
    margin: 0 auto 20px;
    width: 200px;
    height: 200px;
    cursor: pointer;
}

/* Attack Animation */
.modal-image.attack {
    animation: attack-pulse 0.5s ease-in-out;
}

@keyframes attack-pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1) translateX(-5px); }
    100% { transform: scale(1); }
}

.modal-info .modal-types {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-bottom: 20px;
}

.modal-info .details p {
    margin: 5px 0;
}

.modal-info .description {
    margin-top: 20px;
    font-style: italic;
    text-align: justify;
}

.modal-info .stats-list {
    list-style-type: none;
    padding: 0;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
}

.modal-info .stats-list li {
    background-color: #f5f5f5;
    padding: 10px;
    border-radius: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-info .stats-list span:first-child {
    font-weight: bold;
    text-transform: uppercase;
}

/* Variety Button Styles */
.variety-section {
    margin-top: 20px;
}
.variety-section h4 {
    margin-bottom: 10px;
    font-size: 1.2rem;
    color: #555;
    border-bottom: 2px solid #ddd;
    padding-bottom: 5px;
}
.variety-buttons {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 10px;
}
.variety-button {
    background-color: #6390F0;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 20px;
    cursor: pointer;
    font-family: 'Roboto Mono', monospace;
    font-size: 14px;
    transition: background-color 0.3s;
}
.variety-button.active {
    background-color: #3f65b8;
}
.variety-button.shiny-button {
    background-color: #FFD700;
    color: #000;
}
.variety-button.shiny-button.active {
    background-color: #e4c200;
}

.tcg-card-section {
    margin-top: 20px;
    text-align: center;
}
.tcg-card-section img {
    max-width: 100%;
    height: auto;
    border: 5px solid #fff;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    border-radius: 10px;
}
.tcg-card-section .card-loading {
    font-style: italic;
    color: #888;
}

/* Evolution Chain */
.evolution-section {
    margin-top: 20px;
}
.evolution-section h4 {
    margin-bottom: 10px;
    font-size: 1.2rem;
    color: #555;
    border-bottom: 2px solid #ddd;
    padding-bottom: 5px;
}
.evolution-chain {
    display: flex;
    justify-content: center;
    gap: 20px;
}
.evolution-item {
    cursor: pointer;
}
.evolution-item.current img {
    transform: scale(1.2);
}
.evolution-item.current .evolution-name {
    font-weight: bold;
}
.evolution-item img {
    width: 80px;
    height: 80px;
}
.evolution-item .evolution-name {
    text-transform: capitalize;
}

/* Menu Button */
#menu-button {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: url('ball.png') no-repeat center;
    background-size: contain;
    width: 60px;
    height: 60px;
    border: none;
    cursor: pointer;
    z-index: 1000;
}
#menu-button:hover::after {
    content: 'Menu';
    position: absolute;
    bottom: 70px;
    right: 0;
    background: #000;
    color: #fff;
    padding: 5px;
    border-radius: 5px;
}
.menu-options {
    position: fixed;
    bottom: 90px;
    right: 20px;
    display: none;
    flex-direction: column;
    gap: 10px;
    z-index: 1000;
}
.menu-option {
    width: 50px;
    height: 50px;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    cursor: pointer;
    position: relative;
}
.menu-option:hover::after {
    content: attr(data-text);
    position: absolute;
    right: 60px;
    top: 10px;
    background: #000;
    color: #fff;
    padding: 5px;
    border-radius: 5px;
    white-space: nowrap;
}
#help-option { background: url('question.png') no-repeat center; background-size: contain; }
#catch-option { background: url('pokeball-outline.png') no-repeat center; background-size: contain; }
#guess-option { background: url('guess.png') no-repeat center; background-size: contain; }
#battle-option { background: url('battle.png') no-repeat center; background-size: contain; }
#edit-option { background: url('admin.png') no-repeat center; background-size: contain; }
#edit-option.admin-signed-in { background: url('edit.png') no-repeat center; background-size: contain; }
#edit-option:hover::after { content: 'Admin Access Only!'; }
#edit-option.admin-signed-in:hover::after { content: 'Edit'; }
#caught-option { background: url('caught.png') no-repeat center; background-size: contain; }

/* Login Modal */
#login-modal {
    display: block;
    position: fixed;
    z-index: 2000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
}
#login-content {
    background: #fff;
    margin: 15% auto;
    padding: 20px;
    width: 300px;
    text-align: center;
    border-radius: 10px;
}
#login-logo {
    width: 100px;
    margin-bottom: 20px;
}
#username, #password, #signup-name, #signup-password, #signup-age, #profile-name, #admin-username, #admin-password {
    width: 100%;
    padding: 10px;
    margin: 10px 0;
    border: 1px solid #ccc;
    border-radius: 5px;
    box-sizing: border-box;
}
.login-option {
    padding: 10px 20px;
    background: #e4000f;
    color: #fff;
    border: none;
    cursor: pointer;
    border-radius: 5px;
    margin: 5px;
    width: 100%;
}

/* Catch Modal */
#catch-modal {
    display: none;
    position: fixed;
    z-index: 1500;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
}
#catch-content {
    background: #fff;
    margin: 10% auto;
    padding: 20px;
    width: 400px;
    text-align: center;
    border-radius: 10px;
    position: relative;
}
#pokemon-area {
    height: 200px;
    position: relative;
}
#berry-button {
    background: url('berry.png') no-repeat center;
    background-size: contain;
    width: 50px;
    height: 50px;
    border: none;
    cursor: pointer;
    position: absolute;
    top: 20px;
    right: 20px;
}
#pokeball {
    position: absolute;
    bottom: 50px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 60px;
    background: url('pokeball.png') no-repeat center;
    background-size: contain;
    cursor: grab;
}
#pokeball.dragging {
    cursor: grabbing;
}
.shake {
    animation: shake 0.5s;
    animation-iteration-count: 3;
}
@keyframes shake {
    0% { transform: translate(1px, 1px) rotate(0deg); }
    10% { transform: translate(-1px, -2px) rotate(-1deg); }
    20% { transform: translate(-3px, 0px) rotate(1deg); }
    30% { transform: translate(3px, 2px) rotate(0deg); }
    40% { transform: translate(1px, -1px) rotate(1deg); }
    50% { transform: translate(-1px, 2px) rotate(-1deg); }
    60% { transform: translate(-3px, 1px) rotate(0deg); }
    70% { transform: translate(3px, 1px) rotate(-1deg); }
    80% { transform: translate(-1px, -1px) rotate(1deg); }
    90% { transform: translate(1px, 2px) rotate(0deg); }
    100% { transform: translate(1px, -2px) rotate(-1deg); }
}
#pay-unlimited {
    padding: 10px 20px;
    background: #e4000f;
    color: #fff;
    border: none;
    cursor: pointer;
    margin-top: 20px;
    border-radius: 5px;
}

/* Payment Modal */
#payment-modal {
    display: none;
    position: fixed;
    z-index: 1500;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
}
#payment-content {
    background: #fff;
    margin: 10% auto;
    padding: 20px;
    width: 400px;
    text-align: center;
    border-radius: 10px;
}
#payment-form input {
    width: 100%;
    padding: 10px;
    margin: 10px 0;
    border: 1px solid #ccc;
    border-radius: 5px;
    box-sizing: border-box;
}
#confirm-payment {
    background: #e4000f;
    color: #fff;
    border: none;
    padding: 15px 30px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    margin: 20px 0;
}
#confirm-payment:hover {
    background: #c2000d;
}
#claim-trial {
    background: #4CAF50;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    margin: 10px;
}
#claim-trial:hover {
    background: #45a049;
}
#trial-section {
    margin: 10px 0;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
}
.mobile-payment {
    font-size: 18px;
    padding: 20px;
}
.mobile-payment button {
    background: #007AFF;
    color: white;
    border: none;
    padding: 15px 30px;
    border-radius: 10px;
    font-size: 16px;
    cursor: pointer;
    margin: 10px;
}
.mobile-payment button:hover {
    background: #005bb5;
}

/* Profile Modal */
#profile-modal {
    display: none;
    position: fixed;
    z-index: 1500;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
}
#profile-content {
    background: #fff;
    margin: 10% auto;
    padding: 20px;
    width: 400px;
    text-align: center;
    border-radius: 10px;
    position: relative;
}
#add-friend-button {
    background: url('add.png') no-repeat center;
    background-size: contain;
    width: 40px;
    height: 40px;
    border: none;
    cursor: pointer;
}
#online-status {
    margin-top: 10px;
    padding: 5px;
}
#friends-list {
    margin-top: 20px;
    text-align: left;
}
.friend-item {
    display: flex;
    align-items: center;
    padding: 10px;
    border-bottom: 1px solid #ddd;
}
.friend-item img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 10px;
}
.friend-item .friend-name {
    flex-grow: 1;
}
.friend-item .friend-status {
    font-size: 12px;
    color: #888;
}
.friend-item button {
    padding: 5px 10px;
    margin-left: 5px;
    background: #e4000f;
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}
.friend-item button:hover {
    background: #c2000d;
}
#cancel-premium {
    background: #f44336;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    margin: 10px;
}
#cancel-premium:hover {
    background: #da190b;
}

/* Message Modal */
#message-modal {
    display: none;
    position: fixed;
    z-index: 1500;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
}
#message-content {
    background: #fff;
    margin: 10% auto;
    padding: 20px;
    width: 400px;
    text-align: center;
    border-radius: 10px;
}
#message-input {
    width: 100%;
    padding: 10px;
    margin: 10px 0;
    border: 1px solid #ccc;
    border-radius: 5px;
    box-sizing: border-box;
}
#quick-chat-options {
    display: none;
    margin-top: 10px;
}
.quick-chat-option {
    padding: 8px 15px;
    margin: 5px;
    background: #6390F0;
    color: white;
    border: none;
    border-radius: 20px;
    cursor: pointer;
}
.quick-chat-option:hover {
    background: #3f65b8;
}

/* Battle Modal */
#battle-modal {
    display: none;
    position: fixed;
    z-index: 1500;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
}
#battle-content {
    background: #fff;
    margin: 10% auto;
    padding: 20px;
    width: 300px;
    text-align: center;
    border-radius: 10px;
}
#team-rocket, #battle-friend {
    width: 100px;
    height: 100px;
    background-size: contain;
    cursor: pointer;
    margin: 10px auto;
}
#team-rocket { background: url('team.png') no-repeat center; }
#battle-friend { background: url('some.png') no-repeat center; }

/* Caught Pokemon Modal */
#caught-pokemon-modal {
    display: none;
    position: fixed;
    z-index: 1500;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
}
#caught-content {
    background: #fff;
    margin: 10% auto;
    padding: 20px;
    width: 400px;
    text-align: center;
    border-radius: 10px;
}

/* Help Modal */
#help-modal {
    display: none;
    position: fixed;
    z-index: 1500;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
}
#help-content {
    background: #fff;
    margin: 10% auto;
    padding: 20px;
    width: 400px;
    text-align: center;
    border-radius: 10px;
}

/* Guess Modal */
#guess-modal {
    display: none;
    position: fixed;
    z-index: 1500;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
}
#guess-content {
    background: #fff;
    margin: 10% auto;
    padding: 20px;
    width: 400px;
    text-align: center;
    border-radius: 10px;
}

/* Edit Modal */
#edit-modal {
    display: none;
    position: fixed;
    z-index: 1500;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
}
#edit-content {
    background: #fff;
    margin: 10% auto;
    padding: 20px;
    width: 400px;
    text-align: center;
    border-radius: 10px;
}
</style>
</head>
<body>
<div id="login-modal" style="display: none;">
    <div id="login-content">
        <span class="close-button">×</span>
        <img id="login-logo" src="file:///C:/Users/ethan.ioannou30/Downloads/logo.png" alt="Logo">
        <button id="login-option" class="login-option" style="background: rgb(194, 0, 13);">Log In</button>
        <button id="signup-option" class="login-option" style="background: rgb(228, 0, 15);">Sign Up</button>
        <button id="admin-login-option" class="login-option" style="background: rgb(228, 0, 15);">Admin Log-in</button>
        <div id="login-form" style="display: block;">
            <input type="text" id="username" placeholder="Username">
            <input type="password" id="password" placeholder="Password">
            <button id="login-button" class="login-option">Submit</button>
        </div>
        <div id="signup-form" style="display: none;">
            <input type="text" id="signup-name" placeholder="Username">
            <input type="password" id="signup-password" placeholder="Password">
            <input type="text" id="profile-name" placeholder="Profile Name">
            <input type="number" id="signup-age" placeholder="Age">
            <input type="file" id="profile-pic" accept="image/*">
            <select id="profile-gallery">
                <option value="default-profile.png">Default</option>
            </select>
            <button id="submit-signup" class="login-option">Submit</button>
        </div>
        <div id="admin-login-form" style="display: none;">
            <input type="text" id="admin-username" placeholder="Admin Username">
            <input type="password" id="admin-password" placeholder="Admin Password">
            <button id="admin-login-button" class="login-option">Submit</button>
        </div>
    </div>
</div>

<div id="profile-modal">
    <div id="profile-content">
        <span class="close-button">×</span>
        <h2>Profile</h2>
        <p>Premium: <span id="premium-status">No</span></p>
        <p>Caught Pokémon: <span id="caught-count">0</span></p>
        <p>Daily Catches Left: <span id="daily-catches">5</span></p>
        <button id="cancel-premium" style="display: none;">Cancel Premium</button>
        <button id="add-friend-button"></button>
        <input type="text" id="friend-search" placeholder="Search for a friend...">
        <div id="friend-results"></div>
        <select id="online-status">
            <option>Online</option>
            <option>Offline</option>
        </select>
        <div id="friends-list"></div>
    </div>
</div>

<div id="message-modal">
    <div id="message-content">
        <span class="close-button">×</span>
        <h2>Message <span id="message-recipient"></span></h2>
        <div id="quick-chat-options">
            <button class="quick-chat-option" data-message="Hey, want to battle?">Hey, want to battle?</button>
            <button class="quick-chat-option" data-message="Nice Pokémon collection!">Nice Pokémon collection!</button>
            <button class="quick-chat-option" data-message="Caught anything new?">Caught anything new?</button>
        </div>
        <textarea id="message-input" placeholder="Type your message..." rows="4"></textarea>
        <button id="send-message">Send</button>
    </div>
</div>

<div id="battle-modal">
    <div id="battle-content">
        <span class="close-button">×</span>
        <h2>Battle</h2>
        <div id="team-rocket"></div>
        <div id="battle-friend"></div>
    </div>
</div>

<div id="caught-pokemon-modal">
    <div id="caught-content">
        <span class="close-button">×</span>
        <h2>Caught Pokémon</h2>
        <div id="caught-list"></div>
    </div>
</div>

<div id="help-modal">
    <div id="help-content">
        <span class="close-button">×</span>
        <h2>Help</h2>
        <p>Welcome to the Ultimate Pokédex! Browse Pokémon, catch them in a Pokémon GO-style simulation, battle Team Rocket or friends, and play Guess the Pokémon!</p>
    </div>
</div>

<div id="guess-modal">
    <div id="guess-content">
        <span class="close-button">×</span>
        <h2>Guess the Pokémon</h2>
        <div id="guess-image"></div>
        <input type="text" id="guess-input" placeholder="Who&#39;s that Pokémon?">
        <button id="guess-submit">Submit</button>
    </div>
</div>

<div id="edit-modal">
    <div id="edit-content">
        <span class="close-button">×</span>
        <h2>Propose Changes</h2>
        <p>Admin can propose changes here.</p>
    </div>
</div>

<div id="catch-modal">
    <div id="catch-content">
        <span class="close-button">×</span>
        <h2>Catch a Pokémon</h2>
        <div id="pokemon-area"></div>
        <button id="berry-button"></button>
        <div id="pokeball"></div>
        <p>Daily catches left: <span id="daily-left">5</span></p>
        <button id="pay-unlimited">Pay for Unlimited</button>
    </div>
</div>

<div id="payment-modal">
    <div id="payment-content">
        <span class="close-button">×</span>
        <h2>Premium Subscription</h2>
        <p>Upgrade to Premium for unlimited catches! Cancel anytime.</p>
        <p id="weekly-price"><strong>$20/week</strong></p>
        <div id="trial-section" style="display: none;">
            <p>If subscribed to <a href="https://www.youtube.com/@ethanandisabella4098" target="_blank">EthanUnlocked's gaming hits</a>, claim 7-day free trial! (One-time only)</p>
            <button id="claim-trial">Claim Free Trial</button>
        </div>
        <div id="payment-form">
            <input type="text" id="card-name" placeholder="Cardholder Name">
            <input type="text" id="card-number" placeholder="Card Number">
            <input type="text" id="card-expiry" placeholder="MM/YY">
            <input type="text" id="card-cvv" placeholder="CVV">
            <button id="confirm-payment">Confirm Payment</button>
        </div>
        <div id="mobile-payment" class="mobile-payment" style="display: none;">
            <p>Confirm your purchase with Face ID or Touch ID</p>
            <button id="mobile-confirm">Confirm with Face ID</button>
            <button id="touch-confirm" style="display: none;">Confirm with Touch ID</button>
        </div>
    </div>
</div>

<button id="menu-button"></button>
<div class="menu-options">
    <div id="help-option" class="menu-option" data-text="Help"></div>
    <div id="catch-option" class="menu-option" data-text="Catch a Pokémon"></div>
    <div id="guess-option" class="menu-option" data-text="Guess the Pokémon"></div>
    <div id="battle-option" class="menu-option" data-text="Battle"></div>
    <div id="edit-option" class="menu-option" data-text="Edit"></div>
    <div id="caught-option" class="menu-option" data-text="Show Caught Pokémon"></div>
</div>

<div class="top-navbar">
    <a href="file:///C:/Users/ethan.ioannou30/Downloads/turtle.html">Back to others</a>
</div>

<div id="profile" style="cursor: pointer; width: 40px; height: 40px; background-size: cover; position: fixed; top: 10px; right: 10px; display: none;"></div>

<h1>Pokédex</h1>

<div class="nav-container">
    <button class="nav-button active" data-category="all">All</button>
    <button class="nav-button" data-category="mega">Mega</button>
    <button class="nav-button" data-category="regional">Regional</button>
    <button class="nav-button" data-category="shiny">Shiny</button>
    <button class="nav-button" data-category="legendary">Legendary</button>
    <button class="nav-button" data-category="mythical">Mythical</button>
    <button class="nav-button" data-category="gmax">G-Max</button>
    <button class="nav-button" data-category="ultra-beast">Ultra Beast</button>
</div>

<div class="search-container">
    <input type="text" id="searchInput" placeholder="Search for a Pokémon...">
</div>

<p id="loadingMessage">Loading Pokédex...</p>
<button id="retryButton">Retry</button>

<div id="pokedex-container" class="pokedex-container"></div>

<div id="pokemonModal" class="modal">
    <div class="modal-content">
        <span class="close-button">×</span>
        <div id="modal-body"></div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // --- Global Variables and Constants ---
    const BASE_API_URL = 'https://pokeapi.co/api/v2/pokemon?limit=1017';
    // High-quality PNGs for the main modal image (supports most Mega forms)
    const IMAGE_BASE_URL = 'https://raw.githubusercontent.com/HybridShivam/Pokemon/master/assets/images/';
    // PokeAPI sprites for evolution chain/forms (supports shiny reliably)
    const SPRITE_BASE_URL = 'https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/';
    
    // Core Pokédex Elements
    const pokedexContainer = document.querySelector('.pokedex-container');
    const searchInput = document.getElementById('searchInput');
    const loadingMessage = document.getElementById('loadingMessage');
    const retryButton = document.getElementById('retryButton');
    
    // Modal Elements
    const modal = document.getElementById('pokemonModal');
    const modalImage = document.querySelector('.modal-info .modal-image');
    const varietyButtonsDiv = document.querySelector('.variety-buttons');
    const closeButton = document.querySelector('.close-button');
    const evolutionChainContainer = document.getElementById('evolutionChain');
    const otherFormsContainer = document.getElementById('otherForms');
    const SHINY_TOGGLE = document.getElementById('shinyToggle');
    
    // LOGIN/USER Elements (Assumed IDs)
    const loginModal = document.getElementById('loginModal');
    const profile = document.getElementById('profile');
    
    // State Variables
    let allPokemon = [];
    let detailedPokemonData = new Map(); // Cache for API details
    let varietiesData = new Map(); // Cache for forms/varieties
    let evolutionChains = new Map(); // Cache for evolution chain URLs
    let isShiny = false;
    let user = null; 
    let isPremium = false; 
    let loginTimestamp = 0; 

    // --- Utility Functions ---

    // Formats the API variety name (e.g., 'charizard-mega-x') into a display name (e.g., 'Mega-X')
    function formatFormName(apiName) {
        if (apiName === 'standard') return 'Standard';
        if (apiName.includes('-mega')) {
            if (apiName.endsWith('-x')) return 'Mega-X';
            if (apiName.endsWith('-y')) return 'Mega-Y';
            return 'Mega';
        }
        return apiName.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join('-');
    }

    // Gets the high-quality PNG URL for the main modal image
    function getPokemonImageUrl(pokemonId, formName = 'Standard') {
        const paddedId = String(pokemonId).padStart(3, '0');
        let imageFileName;

        if (formName === 'Standard') {
            imageFileName = `${paddedId}.png`;
        } else {
            // Cleans up the form name for the file path
            const cleanedFormName = formName.replace(/-/g, ''); 
            imageFileName = `${paddedId}-${cleanedFormName}.png`;
        }
        
        return `${IMAGE_BASE_URL}${imageFileName}`;
    }

    // Gets the smaller sprite URL for the evolution chain and other forms
    function getPokemonSpriteUrl(pokemonId, isShiny = false) {
        let path = isShiny ? 'shiny/' : '';
        return `${SPRITE_BASE_URL}${path}${pokemonId}.png`;
    }

    // --- Core Pokédex Data Fetching ---

    async function fetchAllPokemon() {
        loadingMessage.textContent = 'Loading Pokédex...';
        loadingMessage.classList.remove('error');
        loadingMessage.style.display = 'block';
        retryButton.style.display = 'none';

        try {
            const response = await fetch(BASE_API_URL);
            if (!response.ok) throw new Error('Network response was not ok');
            const data = await response.json();
            
            allPokemon = data.results.map((p, index) => ({
                id: index + 1,
                name: p.name,
                url: p.url,
            }));

            const speciesCandidates = allPokemon.filter(p => p.id < 10000); 

            await fetchSpeciesData(speciesCandidates);
            displayPokemon(allPokemon);
            loadingMessage.style.display = 'none';

        } catch (error) {
            console.error('Error fetching Pokémon list:', error);
            loadingMessage.textContent = 'Error: Could not load Pokémon data. Please try again.';
            loadingMessage.classList.add('error');
            retryButton.style.display = 'block';
        }
    }

    async function fetchSpeciesData(pokemonArray) {
        loadingMessage.textContent = `Fetching variety and evolution data...`;

        const speciesPromises = pokemonArray.map(async (pokemon) => {
            if (pokemon.id > 1017 && pokemon.id < 10000) return;

            try {
                const speciesUrl = `https://pokeapi.co/api/v2/pokemon-species/${pokemon.id}/`;
                const response = await fetch(speciesUrl);
                if (!response.ok) return;
                const speciesData = await response.json();
                
                if (speciesData.evolution_chain && speciesData.evolution_chain.url) {
                    evolutionChains.set(pokemon.id, speciesData.evolution_chain.url);
                }

                const varieties = speciesData.varieties.map(v => {
                    const nameParts = v.pokemon.url.split('/');
                    const varietyId = parseInt(nameParts[nameParts.length - 2]);
                    const apiName = v.pokemon.name;

                    if (apiName.includes('female')) return null;

                    return {
                        id: varietyId,
                        name: v.is_default ? 'Standard' : formatFormName(apiName),
                        apiName: apiName,
                        isMega: apiName.includes('-mega'),
                        isDefault: v.is_default
                    };
                }).filter(v => v);
                
                varietiesData.set(pokemon.id, varieties);

            } catch (error) {
                console.warn(`Could not fetch species data for ${pokemon.name}:`, error);
            }
        });
        await Promise.all(speciesPromises);
    }
    
    // --- Evolution & Forms Rendering ---

    function parseEvolutionChain(chain, evoChain = []) {
        const speciesName = chain.species.name;
        const pokeEntry = allPokemon.find(p => p.name === speciesName);
        const pokemonId = pokeEntry ? pokeEntry.id : null;

        if (pokemonId) {
            evoChain.push({ id: pokemonId, name: speciesName });
        }

        if (chain.evolves_to.length > 0) {
            chain.evolves_to.forEach(nextStage => {
                parseEvolutionChain(nextStage, evoChain);
            });
        }
        return evoChain;
    }

    async function renderEvolutionChain(speciesId) {
        evolutionChainContainer.innerHTML = 'Loading chain...';
        const chainUrl = evolutionChains.get(speciesId);
        
        if (!chainUrl) {
            evolutionChainContainer.innerHTML = '<p>No evolution chain data available.</p>';
            return;
        }

        try {
            const response = await fetch(chainUrl);
            const data = await response.json();
            const chain = parseEvolutionChain(data.chain);

            let html = '';
            for (let i = 0; i < chain.length; i++) {
                const poke = chain[i];
                // Use isShiny state for the sprite URL
                const spriteUrl = getPokemonSpriteUrl(poke.id, isShiny);

                html += `
                    <div class="chain-item" data-id="${poke.id}">
                        <img src="${spriteUrl}" alt="${poke.name}" onerror="this.src='${getPokemonSpriteUrl(poke.id, false)}'">
                        <span>${poke.name}</span>
                    </div>
                `;
                if (i < chain.length - 1) {
                    html += `<div class="chain-arrow">→</div>`;
                }
            }
            evolutionChainContainer.innerHTML = html;
        } catch (error) {
            evolutionChainContainer.innerHTML = '<p>Failed to load evolution chain.</p>';
            console.error('Error fetching evolution chain:', error);
        }
    }

    function renderOtherForms(pokemonId) {
        otherFormsContainer.innerHTML = '';
        const allVarieties = varietiesData.get(pokemonId) || [];
        
        // Filter out Mega and standard forms
        const otherForms = allVarieties.filter(v => !v.isMega && !v.isDefault && v.name !== 'Standard');
        
        if (otherForms.length === 0) {
            otherFormsContainer.innerHTML = '<p>No other special forms available.</p>';
            return;
        }

        otherForms.forEach(v => {
            const spriteUrl = getPokemonSpriteUrl(v.id, isShiny);
            
            const formDiv = document.createElement('div');
            formDiv.classList.add('form-item');
            formDiv.innerHTML = `
                <img src="${spriteUrl}" alt="${v.name}" onerror="this.src='${getPokemonSpriteUrl(v.id, false)}'">
                <span>${v.name}</span>
            `;
            formDiv.addEventListener('click', () => {
                const mainPoke = allPokemon.find(p => p.name === v.apiName.split('-')[0]);
                if (mainPoke) showPokemonDetails(mainPoke.id, mainPoke.name, v.apiName);
            });

            otherFormsContainer.appendChild(formDiv);
        });
    }

    // --- Pokedex Grid and Modal Display ---

    function displayPokemon(pokemonArray) {
        pokedexContainer.innerHTML = '';
        if (pokemonArray.length === 0) {
            pokedexContainer.innerHTML = '<p>No Pokémon found matching your search.</p>';
            return;
        }

        pokemonArray.forEach(pokemon => {
            if (pokemon.id >= 10000) return; 

            const card = document.createElement('div');
            card.classList.add('pokemon-card');
            const imageUrl = getPokemonImageUrl(pokemon.id);

            card.innerHTML = `
                <p class="pokemon-id">#${String(pokemon.id).padStart(3, '0')}</p>
                <img src="${imageUrl}" alt="${pokemon.name}" onerror="this.onerror=null;this.src='${getPokemonSpriteUrl(pokemon.id, false)}';">
                <p class="pokemon-name">${pokemon.name}</p>
                <div class="pokemon-types"></div>
            `;
            
            card.addEventListener('click', () => {
                isShiny = false; // Reset shiny state when opening new card
                SHINY_TOGGLE.textContent = 'Toggle Shiny'; 
                showPokemonDetails(pokemon.id, pokemon.name);
            });
            pokedexContainer.appendChild(card);
        });
    }

    async function showPokemonDetails(pokemonId, pokemonName, formApiName = null) {
        let detailedPoke;
        const fetchName = formApiName || pokemonName;

        if (detailedPokemonData.get(fetchName)) {
            detailedPoke = detailedPokemonData.get(fetchName);
        } else {
            loadingMessage.textContent = `Fetching details for ${fetchName}...`;
            loadingMessage.style.display = 'block';

            try {
                const response = await fetch(`https://pokeapi.co/api/v2/pokemon/${fetchName}`);
                if (!response.ok) throw new Error('Failed to fetch detailed data');
                detailedPoke = await response.json();
                detailedPokemonData.set(fetchName, detailedPoke);
            } catch (error) {
                loadingMessage.textContent = 'Error fetching Pokémon details.';
                loadingMessage.classList.add('error');
                console.error(error);
                return;
            } finally {
                loadingMessage.style.display = 'none';
            }
        }
        
        const speciesId = allPokemon.find(p => p.name === pokemonName)?.id || pokemonId;
        const varieties = varietiesData.get(speciesId) || [];
        
        const currentVariety = varieties.find(v => v.apiName === fetchName);
        const currentFormName = currentVariety ? currentVariety.name : 'Standard';
        const imageUrl = getPokemonImageUrl(speciesId, currentFormName);
        
        document.querySelector('.modal-info h2').textContent = currentFormName === 'Standard' ? detailedPoke.name : detailedPoke.name + ` (${currentFormName})`;
        document.querySelector('.modal-info .modal-id').textContent = `#${String(speciesId).padStart(3, '0')}`;
        
        const mainImageUpdate = () => {
             // Use high-quality image for standard, reliable sprite for shiny
             modalImage.src = isShiny ? getPokemonSpriteUrl(speciesId, true) : imageUrl;
             modalImage.alt = `${detailedPoke.name} - ${currentFormName} ${isShiny ? '(Shiny)' : ''}`;
        };
        mainImageUpdate();

        // Variety Buttons (Standard and Megas)
        varietyButtonsDiv.innerHTML = '';
        const primaryForms = varieties.filter(v => v.isDefault || v.isMega);

        primaryForms.forEach(v => {
            const varietyButton = document.createElement('button');
            varietyButton.classList.add('variety-button');
            varietyButton.textContent = v.name;
            if (v.apiName === fetchName) {
                varietyButton.classList.add('active');
            }
            if (v.isMega) {
                varietyButton.style.backgroundColor = '#6F35FC'; 
            }

            varietyButton.addEventListener('click', () => {
                showPokemonDetails(speciesId, pokemonName, v.apiName);
            });

            varietyButtonsDiv.appendChild(varietyButton);
        });

        // Types and Stats rendering
        const modalTypes = document.querySelector('.modal-info .modal-types');
        modalTypes.innerHTML = '';
        detailedPoke.types.forEach(typeInfo => {
            const typeSpan = document.createElement('span');
            typeSpan.classList.add('type', typeInfo.type.name);
            typeSpan.textContent = typeInfo.type.name;
            modalTypes.appendChild(typeSpan);
        });

        const statsList = document.querySelector('.modal-info .stats-list');
        statsList.innerHTML = '';
        detailedPoke.stats.forEach(statInfo => {
            const statLi = document.createElement('li');
            statLi.innerHTML = `<span>${statInfo.stat.name.toUpperCase()}</span><span>${statInfo.base_stat}</span>`;
            statsList.appendChild(statLi);
        });
        
        await renderEvolutionChain(speciesId);
        renderOtherForms(speciesId);

        modal.style.display = 'block';

        // Update shiny toggle logic
        SHINY_TOGGLE.onclick = () => {
            isShiny = !isShiny;
            SHINY_TOGGLE.textContent = isShiny ? 'Toggle Standard' : 'Toggle Shiny';
            
            mainImageUpdate();
            renderEvolutionChain(speciesId);
            renderOtherForms(speciesId);
        };
    }

    // --- Login/User Session Logic (Restored) ---

    function checkPremiumExpiry() {
        const PREMIUM_DURATION_MS = 24 * 60 * 60 * 1000; // 24 hours
        if (isPremium && Date.now() - loginTimestamp > PREMIUM_DURATION_MS) {
            isPremium = false;
            user.isPremium = false;
            localStorage.setItem('currentUser', JSON.stringify(user));
            alert('Your premium subscription has expired!');
        }
    }

    function init() {
        // Try to restore session
        const loggedInUser = localStorage.getItem('currentUser');
        if (loggedInUser) {
            user = JSON.parse(loggedInUser);
            isPremium = user.isPremium;
            // Assuming your profile element is styled to show the image via background property
            profile.style.backgroundImage = `url(${user.profilePic})`; 
            profile.style.display = 'block';
            loginTimestamp = parseInt(localStorage.getItem('loginTimestamp'), 10) || Date.now();
            checkPremiumExpiry();
            loginModal.style.display = 'none';
        } else {
            // SHOW THE LOGIN MODAL if not logged in
            loginModal.style.display = 'block';
            profile.style.display = 'none';
        }
        fetchAllPokemon();
    }

    // --- Event Listeners ---
    
    closeButton.onclick = function() {
        modal.style.display = 'none';
        isShiny = false;
        SHINY_TOGGLE.textContent = 'Toggle Shiny';
    }

    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = 'none';
            isShiny = false;
            SHINY_TOGGLE.textContent = 'Toggle Shiny';
        }
    }
    
    // Search Filter (Fixed to use name or padded/unpadded ID)
    searchInput.addEventListener('input', (e) => {
        const searchTerm = e.target.value.toLowerCase();
        const filteredPokemon = allPokemon.filter(p => 
            p.name.includes(searchTerm) || String(p.id).padStart(3, '0').includes(searchTerm) || String(p.id).includes(searchTerm)
        );
        displayPokemon(filteredPokemon);
    });

    retryButton.addEventListener('click', fetchAllPokemon);

    // --- Initialization ---
    init();
});
</script>


</body></html>
