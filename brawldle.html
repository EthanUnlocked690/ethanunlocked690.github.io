<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brawl Stars-dle: Daily &amp; Unlimited</title>
    <style>
        /* --- General CSS & Overrides --- */
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700;900&display=swap');

        body {
            font-family: 'Roboto', sans-serif;
            background-color: #1a1a2e;
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            min-height: 100vh;
        }

        h1 {
            color: #ffc107;
            text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.7);
            margin-bottom: 10px;
        }

        #app-root {
            width: 100%;
            max-width: 900px;
        }

        #game-container {
            background-color: #2c2c54;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            margin-top: 20px;
            display: none; /* Initially hidden until a mode is selected */
        }

        /* --- Mode Selection --- */
        #mode-select {
            text-align: center;
            padding: 40px;
            border: 2px solid #ffc107;
            border-radius: 10px;
            background-color: #3b3b64;
            margin-top: 50px;
        }

        #mode-select h2 {
            margin-bottom: 20px;
            color: #fff;
        }

        .mode-button {
            padding: 15px 30px;
            margin: 10px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.2s;
        }

        #daily-mode-btn {
            background-color: #28a745;
            color: white;
        }

        #unlimited-mode-btn {
            background-color: #007bff;
            color: white;
        }

        .mode-button:hover {
            transform: scale(1.05);
        }

        /* --- Input & Button --- */
        #input-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        #guess-input {
            padding: 10px;
            flex-grow: 1;
            border: 2px solid #ffc107;
            border-radius: 8px;
            background-color: #1a1a2e;
            color: white;
            font-size: 16px;
        }

        #guess-button {
            padding: 10px 20px;
            background-color: #ffc107;
            color: #1a1a2e;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        #guess-button:hover {
            background-color: #e0a800;
        }

        #guess-button:disabled {
            background-color: #555;
            cursor: not-allowed;
        }

        /* --- Guesses Table --- */
        #guesses-table {
            width: 100%;
            border-collapse: collapse;
            text-align: center;
            margin-top: 20px;
        }

        #guesses-table th, #guesses-table td {
            padding: 12px 8px;
            border: 1px solid #444;
        }

        #guesses-table th {
            background-color: #4a4a7a;
            color: #ffc107;
            font-weight: 700;
        }

        #guesses-table tbody tr:nth-child(even) {
            background-color: #3b3b64;
        }

        #guesses-table tbody tr:nth-child(odd) {
            background-color: #2c2c54;
        }

        /* --- Clue Colors --- */
        .clue-green {
            background-color: #4CAF50 !important; /* Green */
            color: white;
        }

        .clue-yellow {
            background-color: #FFC107 !important; /* Yellow */
            color: #1a1a2e;
        }

        .clue-red {
            background-color: #F44336 !important; /* Red */
            color: white;
        }

        .clue-gray {
            background-color: #888 !important; /* Gray (for release date/chromatic) */
            color: white;
        }

        .clue-light-blue {
            background-color: #00BCD4 !important; /* Light Blue (for class) */
            color: white;
        }

        /* --- Modal --- */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; 
            z-index: 1000; 
            left: 0;
            top: 0;
            width: 100%; 
            height: 100%; 
            overflow: auto; 
            background-color: rgba(0,0,0,0.8); 
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #2c2c54;
            margin: 15% auto; 
            padding: 30px;
            border: 5px solid #ffc107;
            border-radius: 15px;
            width: 80%; 
            max-width: 400px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(255, 193, 7, 0.5);
            animation: fadeIn 0.5s;
        }

        .modal-content h2 {
            color: #ffc107;
            font-size: 28px;
            margin-bottom: 10px;
        }

        .modal-content p {
            font-size: 18px;
            margin-bottom: 20px;
        }

        #final-answer {
            color: #4CAF50;
            font-weight: 900;
            font-size: 24px;
            display: block;
            margin-bottom: 15px;
        }

        .close-button {
            background-color: #F44336;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
            transition: background-color 0.2s;
        }

        .close-button:hover {
            background-color: #d32f2f;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        /* --- Other Sections --- */
        #yesterday-answer {
            margin-top: 15px;
            font-size: 14px;
            color: #aaa;
            text-align: center;
        }

        #stats-container {
            margin-top: 20px;
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            background-color: #3b3b64;
        }

        #stats-container h3 {
            color: #ffc107;
            margin-bottom: 10px;
        }

        .stat-item {
            display: inline-block;
            margin: 0 15px;
            font-size: 16px;
        }

        .stat-value {
            font-weight: bold;
            display: block;
            font-size: 20px;
            color: #4CAF50;
        }

        /* --- Revive Button --- */
        #revive-btn {
            background-color: #FF9800; /* Orange for revive */
            color: #1a1a2e;
            font-weight: bold;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 15px;
            display: none; /* Hidden by default */
            transition: background-color 0.2s;
        }

        #revive-btn:hover {
            background-color: #e68900;
        }
    </style>
</head>
<body>
    <div id="app-root">
        <h1>Brawl Stars-dle</h1>

        <div id="mode-select">
            <h2>Select Game Mode</h2>
            <p>Welcome to Brawl Stars-dle! Choose your challenge:</p>
            <button id="daily-mode-btn" class="mode-button">Daily Challenge</button>
            <button id="unlimited-mode-btn" class="mode-button">Unlimited</button>
            <div id="yesterday-answer"></div>
        </div>
        
        <div id="game-container">
            <div id="stats-container">
                <h3>Statistics</h3>
                <div class="stat-item">Wins: <span id="stat-wins" class="stat-value">0</span></div>
                <div class="stat-item">Streak: <span id="stat-streak" class="stat-value">0</span></div>
                <div class="stat-item">Max Streak: <span id="stat-max-streak" class="stat-value">0</span></div>
            </div>

            <div id="input-container" style="margin-top: 20px;">
                <input type="text" id="guess-input" placeholder="Enter Brawler Name">
                <button id="guess-button">Guess</button>
            </div>
            
            <table id="guesses-table">
                <thead>
                    <tr>
                        <th>Brawler</th>
                        <th>Rarity</th>
                        <th>Class</th>
                        <th>Speed</th>
                        <th>Hypercharge</th>
                        <th>Release Date</th>
                    </tr>
                </thead>
                <tbody id="guesses-body">
                    </tbody>
            </table>
        </div>
    </div>

    <div id="game-modal" class="modal">
        <div class="modal-content">
            <h2 id="modal-title"></h2>
            <p id="modal-message"></p>
            <div id="correct-pin-display"></div>
            <span id="final-answer"></span>
            
            <button id="revive-btn" style="display: none;">Use Premium Revive (X Remaining)</button>
            <button class="close-button" id="close-modal-btn">Continue</button>
        </div>
    </div>

    <script>
        // Data containing all Brawlers and their properties (simplified)
        const BRAWLERS_RAW = [
            { name: "Shelly", rarity: "Starting", class: "Damage", speed: 720, hypercharge: true, releaseDate: "Dec 2018", pin: "https://cdn.brawlify.com/pins/Shelly/Pin.png" },
            { name: "Nita", rarity: "Trophy Road", class: "Damage", speed: 720, hypercharge: true, releaseDate: "Dec 2018", pin: "https://cdn.brawlify.com/pins/Nita/Pin.png" },
            { name: "Colt", rarity: "Trophy Road", class: "Damage", speed: 770, hypercharge: true, releaseDate: "Dec 2018", pin: "https://cdn.brawlify.com/pins/Colt/Pin.png" },
            { name: "Bull", rarity: "Trophy Road", class: "Tank", speed: 770, hypercharge: true, releaseDate: "Dec 2018", pin: "https://cdn.brawlify.com/pins/Bull/Pin.png" },
            { name: "Jessie", rarity: "Trophy Road", class: "Damage", speed: 720, hypercharge: true, releaseDate: "Dec 2018", pin: "https://cdn.brawlify.com/pins/Jessie/Pin.png" },
            { name: "Brock", rarity: "Trophy Road", class: "Artillery", speed: 720, hypercharge: true, releaseDate: "Dec 2018", pin: "https://cdn.brawlify.com/pins/Brock/Pin.png" },
            { name: "Dynamike", rarity: "Super Rare", class: "Artillery", speed: 770, hypercharge: true, releaseDate: "Dec 2018", pin: "https://cdn.brawlify.com/pins/Dynamike/Pin.png" },
            { name: "Bo", rarity: "Trophy Road", class: "Damage", speed: 720, hypercharge: true, releaseDate: "Dec 2018", pin: "https://cdn.brawlify.com/pins/Bo/Pin.png" },
            { name: "Tick", rarity: "Super Rare", class: "Artillery", speed: 720, hypercharge: true, releaseDate: "Jun 2019", pin: "https://cdn.brawlify.com/pins/Tick/Pin.png" },
            { name: "8-Bit", rarity: "Trophy Road", class: "Damage", speed: 620, hypercharge: true, releaseDate: "Aug 2019", pin: "https://cdn.brawlify.com/pins/8-Bit/Pin.png" },
            { name: "Emz", rarity: "Trophy Road", class: "Damage", speed: 720, hypercharge: true, releaseDate: "Oct 2019", pin: "https://cdn.brawlify.com/pins/Emz/Pin.png" },
            { name: "El Primo", rarity: "Rare", class: "Tank", speed: 770, hypercharge: true, releaseDate: "Dec 2018", pin: "https://cdn.brawlify.com/pins/El-Primo/Pin.png" },
            { name: "Barley", rarity: "Rare", class: "Artillery", speed: 720, hypercharge: true, releaseDate: "Dec 2018", pin: "https://cdn.brawlify.com/pins/Barley/Pin.png" },
            { name: "Poco", rarity: "Rare", class: "Support", speed: 720, hypercharge: true, releaseDate: "Dec 2018", pin: "https://cdn.brawlify.com/pins/Poco/Pin.png" },
            { name: "Rosa", rarity: "Rare", class: "Tank", speed: 720, hypercharge: true, releaseDate: "Apr 2019", pin: "https://cdn.brawlify.com/pins/Rosa/Pin.png" },
            { name: "Rico", rarity: "Super Rare", class: "Damage", speed: 720, hypercharge: true, releaseDate: "Dec 2018", pin: "https://cdn.brawlify.com/pins/Rico/Pin.png" },
            { name: "Darryl", rarity: "Super Rare", class: "Tank", speed: 770, hypercharge: true, releaseDate: "Dec 2017", pin: "https://cdn.brawlify.com/pins/Darryl/Pin.png" },
            { name: "Penny", rarity: "Super Rare", class: "Damage", speed: 720, hypercharge: true, releaseDate: "May 2018", pin: "https://cdn.brawlify.com/pins/Penny/Pin.png" },
            { name: "Carl", rarity: "Super Rare", class: "Damage", speed: 770, hypercharge: true, releaseDate: "Mar 2019", pin: "https://cdn.brawlify.com/pins/Carl/Pin.png" },
            { name: "Jacky", rarity: "Super Rare", class: "Tank", speed: 770, hypercharge: true, releaseDate: "Mar 2020", pin: "https://cdn.brawlify.com/pins/Jacky/Pin.png" },
            { name: "Gus", rarity: "Super Rare", class: "Support", speed: 720, hypercharge: false, releaseDate: "Sep 2022", pin: "https://cdn.brawlify.com/pins/Gus/Pin.png" },
            { name: "Piper", rarity: "Epic", class: "Damage", speed: 720, hypercharge: true, releaseDate: "Mar 2017", pin: "https://cdn.brawlify.com/pins/Piper/Pin.png" },
            { name: "Pam", rarity: "Epic", class: "Support", speed: 720, hypercharge: false, releaseDate: "Apr 2017", pin: "https://cdn.brawlify.com/pins/Pam/Pin.png" },
            { name: "Frank", rarity: "Epic", class: "Tank", speed: 720, hypercharge: true, releaseDate: "Mar 2018", pin: "https://cdn.brawlify.com/pins/Frank/Pin.png" },
            { name: "Bibi", rarity: "Epic", class: "Tank", speed: 820, hypercharge: true, releaseDate: "May 2019", pin: "https://cdn.brawlify.com/pins/Bibi/Pin.png" },
            { name: "Bea", rarity: "Epic", class: "Damage", speed: 720, hypercharge: true, releaseDate: "Dec 2019", pin: "https://cdn.brawlify.com/pins/Bea/Pin.png" },
            { name: "Nani", rarity: "Epic", class: "Artillery", speed: 720, hypercharge: true, releaseDate: "Jun 2020", pin: "https://cdn.brawlify.com/pins/Nani/Pin.png" },
            { name: "Edgar", rarity: "Epic", class: "Assassin", speed: 820, hypercharge: true, releaseDate: "Dec 2020", pin: "https://cdn.brawlify.com/pins/Edgar/Pin.png" },
            { name: "Grom", rarity: "Epic", class: "Artillery", speed: 720, hypercharge: false, releaseDate: "Dec 2021", pin: "https://cdn.brawlify.com/pins/Grom/Pin.png" },
            { name: "Griff", rarity: "Epic", class: "Damage", speed: 720, hypercharge: true, releaseDate: "Jul 2021", pin: "https://cdn.brawlify.com/pins/Griff/Pin.png" },
            { name: "Bonnie", rarity: "Epic", class: "Damage", speed: 770, hypercharge: true, releaseDate: "May 2022", pin: "https://cdn.brawlify.com/pins/Bonnie/Pin.png" },
            { name: "Mandy", rarity: "Epic", class: "Damage", speed: 720, hypercharge: true, releaseDate: "Jan 2023", pin: "https://cdn.brawlify.com/pins/Mandy/Pin.png" },
            { name: "Hank", rarity: "Epic", class: "Tank", speed: 620, hypercharge: false, releaseDate: "Jun 2023", pin: "https://cdn.brawlify.com/pins/Hank/Pin.png" },
            { name: "Willow", rarity: "Epic", class: "Support", speed: 720, hypercharge: true, releaseDate: "Apr 2023", pin: "https://cdn.brawlify.com/pins/Willow/Pin.png" },
            { name: "Meeple", rarity: "Epic", class: "Support", speed: 720, hypercharge: false, releaseDate: "Mar 2024", pin: "https://cdn.brawlify.com/pins/Meeple/Pin.png" }, 
            { name: "Mortis", rarity: "Mythic", class: "Assassin", speed: 820, hypercharge: true, releaseDate: "Dec 2016", pin: "https://cdn.brawlify.com/pins/Mortis/Pin.png" },
            { name: "Tara", rarity: "Mythic", class: "Damage", speed: 720, hypercharge: true, releaseDate: "Dec 2017", pin: "https://cdn.brawlify.com/pins/Tara/Pin.png" },
            { name: "Gene", rarity: "Mythic", class: "Support", speed: 720, hypercharge: true, releaseDate: "Feb 2019", pin: "https://cdn.brawlify.com/pins/Gene/Pin.png" },
            { name: "Max", rarity: "Mythic", class: "Support", speed: 820, hypercharge: true, releaseDate: "Dec 2019", pin: "https://cdn.brawlify.com/pins/Max/Pin.png" },
            { name: "Mr. P", rarity: "Mythic", class: "Artillery", speed: 720, hypercharge: true, releaseDate: "Jan 2020", pin: "https://cdn.brawlify.com/pins/Mr.-P/Pin.png" },
            { name: "Sprout", rarity: "Mythic", class: "Artillery", speed: 720, hypercharge: true, releaseDate: "Apr 2020", pin: "https://cdn.brawlify.com/pins/Sprout/Pin.png" },
            { name: "Byron", rarity: "Mythic", class: "Support", speed: 720, hypercharge: false, releaseDate: "Dec 2020", pin: "https://cdn.brawlify.com/pins/Byron/Pin.png" },
            { name: "Squeak", rarity: "Mythic", class: "Artillery", speed: 770, hypercharge: true, releaseDate: "May 2021", pin: "https://cdn.brawlify.com/pins/Squeak/Pin.png" },
            { name: "Lou", rarity: "Mythic", class: "Control", speed: 720, hypercharge: true, releaseDate: "Oct 2020", pin: "https://cdn.brawlify.com/pins/Lou/Pin.png" },
            { name: "Ruffs", rarity: "Mythic", class: "Support", speed: 720, hypercharge: true, releaseDate: "Feb 2021", pin: "https://cdn.brawlify.com/pins/Ruffs/Pin.png" },
            { name: "Buzz", rarity: "Mythic", class: "Assassin", speed: 770, hypercharge: true, releaseDate: "Jul 2021", pin: "https://cdn.brawlify.com/pins/Buzz/Pin.png" },
            { name: "Fang", rarity: "Mythic", class: "Assassin", speed: 770, hypercharge: true, releaseDate: "Dec 2021", pin: "https://cdn.brawlify.com/pins/Fang/Pin.png" },
            { name: "Eve", rarity: "Mythic", class: "Artillery", speed: 720, hypercharge: true, releaseDate: "Mar 2022", pin: "https://cdn.brawlify.com/pins/Eve/Pin.png" },
            { name: "Janet", rarity: "Mythic", class: "Damage", speed: 720, hypercharge: true, releaseDate: "May 2022", pin: "https://cdn.brawlify.com/pins/Janet/Pin.png" },
            { name: "Otis", rarity: "Mythic", class: "Damage", speed: 720, hypercharge: true, releaseDate: "Jul 2022", pin: "https://cdn.brawlify.com/pins/Otis/Pin.png" },
            { name: "Sam", rarity: "Mythic", class: "Tank", speed: 770, hypercharge: true, releaseDate: "Sep 2022", pin: "https://cdn.brawlify.com/pins/Sam/Pin.png" },
            { name: "Chester", rarity: "Legendary", class: "Damage", speed: 770, hypercharge: true, releaseDate: "Dec 2022", pin: "https://cdn.brawlify.com/pins/Chester/Pin.png" },
            { name: "Mico", rarity: "Mythic", class: "Assassin", speed: 820, hypercharge: true, releaseDate: "Dec 2023", pin: "https://cdn.brawlify.com/pins/Mico/Pin.png" },
            { name: "Juju", rarity: "Mythic", class: "Support", speed: 720, hypercharge: false, releaseDate: "Apr 2024", pin: "https://cdn.brawlify.com/pins/Juju/Pin.png" }, 
            { name: "Jae-Yong", rarity: "Mythic", class: "Damage", speed: 720, hypercharge: false, releaseDate: "May 2024", pin: "https://cdn.brawlify.com/pins/Jae-Yong/Pin.png" }, 
            { name: "Spike", rarity: "Legendary", class: "Damage", speed: 720, hypercharge: true, releaseDate: "Dec 2016", pin: "https://cdn.brawlify.com/pins/Spike/Pin.png" },
            { name: "Crow", rarity: "Legendary", class: "Assassin", speed: 820, hypercharge: true, releaseDate: "Dec 2016", pin: "https://cdn.brawlify.com/pins/Crow/Pin.png" },
            { name: "Leon", rarity: "Legendary", class: "Assassin", speed: 820, hypercharge: true, releaseDate: "Dec 2018", pin: "https://cdn.brawlify.com/pins/Leon/Pin.png" },
            { name: "Sandy", rarity: "Legendary", class: "Support", speed: 720, hypercharge: true, releaseDate: "Sep 2019", pin: "https://cdn.brawlify.com/pins/Sandy/Pin.png" },
            { name: "Amber", rarity: "Legendary", class: "Damage", speed: 770, hypercharge: true, releaseDate: "Oct 2020", pin: "https://cdn.brawlify.com/pins/Amber/Pin.png" },
            { name: "Meg", rarity: "Legendary", class: "Damage", speed: 720, hypercharge: true, releaseDate: "Sep 2021", pin: "https://cdn.brawlify.com/pins/Meg/Pin.png" },
            { name: "Surge", rarity: "Legendary", class: "Damage", speed: 770, hypercharge: true, releaseDate: "Jul 2020", pin: "https://cdn.brawlify.com/pins/Surge/Pin.png" },
            { name: "Colette", rarity: "Epic", class: "Damage", speed: 720, hypercharge: true, releaseDate: "Sep 2020", pin: "https://cdn.brawlify.com/pins/Colette/Pin.png" },
            { name: "Ash", rarity: "Epic", class: "Tank", speed: 720, hypercharge: true, releaseDate: "Sep 2021", pin: "https://cdn.brawlify.com/pins/Ash/Pin.png" },
            { name: "Lola", rarity: "Epic", class: "Damage", speed: 720, hypercharge: true, releaseDate: "Nov 2021", pin: "https://cdn.brawlify.com/pins/Lola/Pin.png" },
            { name: "Gale", rarity: "Epic", class: "Support", speed: 720, hypercharge: true, releaseDate: "May 2020", pin: "https://cdn.brawlify.com/pins/Gale/Pin.png" },
            { name: "Belle", rarity: "Epic", class: "Damage", speed: 720, hypercharge: true, releaseDate: "Apr 2021", pin: "https://cdn.brawlify.com/pins/Belle/Pin.png" },
            { name: "Byron", rarity: "Mythic", class: "Support", speed: 720, hypercharge: true, releaseDate: "Dec 2020", pin: "https://cdn.brawlify.com/pins/Byron/Pin.png" },
            { name: "R-T", rarity: "Legendary", class: "Damage", speed: 720, hypercharge: true, releaseDate: "Mar 2023", pin: "https://cdn.brawlify.com/pins/R-T/Pin.png" },
            { name: "Cordelius", rarity: "Legendary", class: "Assassin", speed: 820, hypercharge: true, releaseDate: "Jul 2023", pin: "https://cdn.brawlify.com/pins/Cordelius/Pin.png" },
            { name: "Chuck", rarity: "Mythic", class: "Tank", speed: 770, hypercharge: true, releaseDate: "Oct 2023", pin: "https://cdn.brawlify.com/pins/Chuck/Pin.png" },
            { name: "Charlie", rarity: "Epic", class: "Control", speed: 720, hypercharge: true, releaseDate: "Sep 2023", pin: "https://cdn.brawlify.com/pins/Charlie/Pin.png" },
            { name: "L & L", rarity: "Epic", class: "Artillery", speed: 770, hypercharge: true, releaseDate: "Jan 2024", pin: "https://cdn.brawlify.com/pins/Larry-and-Lawrie/Pin.png" }, // Larry and Lawrie entry
        ];
        
        // Normalize Brawler data for easier lookup
        const BRAWLERS = BRAWLERS_RAW.reduce((map, brawler) => {
            map[brawler.name.toLowerCase()] = {
                ...brawler,
                speedName: brawler.speed === 820 ? 'Very Fast' : brawler.speed === 770 ? 'Fast' : brawler.speed === 720 ? 'Normal' : 'Slow'
            };
            return map;
        }, {});

        // --- GLOBAL STATE ---
        let targetBrawler = null; 
        let guessesMade = 0;
        let maxGuesses = 6;
        let gameMode = 'daily'; // 'daily' or 'unlimited'
        let dailyDayNumber = null;
        let isGameOver = false;

        // --- DOM Elements ---
        const input = document.getElementById('guess-input');
        const button = document.getElementById('guess-button');
        const guessesBody = document.getElementById('guesses-body');
        const modal = document.getElementById('game-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalMessage = document.getElementById('modal-message');
        const finalAnswer = document.getElementById('final-answer');
        const correctPinDisplay = document.getElementById('correct-pin-display');
        const closeBtn = document.getElementById('close-modal-btn');
        const dailyBtn = document.getElementById('daily-mode-btn');
        const unlimitedBtn = document.getElementById('unlimited-mode-btn');
        const gameContainer = document.getElementById('game-container');
        const modeSelect = document.getElementById('mode-select');
        const yesterdayAnswerDiv = document.getElementById('yesterday-answer');
        const reviveBtn = document.getElementById('revive-btn');
        const statWins = document.getElementById('stat-wins');
        const statStreak = document.getElementById('stat-streak');
        const statMaxStreak = document.getElementById('stat-max-streak');
        
        // --- PREMIUM & USER STATE (Simplified) ---
        let currentUser = {
            premium: 'none', // 'none', 'premium', 'ultra'
            revivesUsedToday: 0
        };

        const PREMIUM_TIERS = {
            'none': { maxRevives: 0 },
            'premium': { maxRevives: 1 },
            'ultra': { maxRevives: 3 }
        };

        // --- LOCAL STORAGE HELPERS ---
        const getLocalStorage = (key, defaultValue) => {
            try {
                const item = localStorage.getItem(key);
                return item ? JSON.parse(item) : defaultValue;
            } catch (e) {
                console.error("Error getting localStorage:", e);
                return defaultValue;
            }
        };

        const setLocalStorage = (key, value) => {
            try {
                localStorage.setItem(key, JSON.stringify(value));
            } catch (e) {
                console.error("Error setting localStorage:", e);
            }
        };

        // --- DAILY GAME LOGIC ---
        const getDailyBrawler = () => {
            const today = new Date();
            const startOfBrawlStarsDle = new Date('2024-01-01'); // Arbitrary start date for the cycle
            const diffTime = Math.abs(today.getTime() - startOfBrawlStarsDle.getTime());
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            dailyDayNumber = diffDays;
            
            const brawlerKeys = Object.keys(BRAWLERS);
            // This ensures the same brawler is selected each day based on the day number
            const brawlerIndex = diffDays % brawlerKeys.length;
            const brawlerName = brawlerKeys[brawlerIndex];
            
            return BRAWLERS[brawlerName];
        };
        
        const isDailyCompleted = () => {
            const lastDaily = getLocalStorage('lastDaily', {});
            // Use <= to account for any slight time drift, although == is fine for the day number
            return lastDaily.day && lastDaily.day >= dailyDayNumber; 
        };
        
        const setDailyComplete = (brawlerName = targetBrawler.name) => {
            setLocalStorage('lastDaily', { 
                day: dailyDayNumber, 
                brawler: brawlerName, 
                guesses: guessesMade
            });
        };

        const getYesterdayBrawler = () => {
            const today = new Date();
            const startOfBrawlStarsDle = new Date('2024-01-01');
            const diffTime = Math.abs(today.getTime() - startOfBrawlStarsDle.getTime());
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            const yesterdayDayNumber = diffDays - 1;
            
            const brawlerKeys = Object.keys(BRAWLERS);
            const brawlerIndex = (yesterdayDayNumber % brawlerKeys.length + brawlerKeys.length) % brawlerKeys.length;
            const brawlerName = brawlerKeys[brawlerIndex];
            
            return BRAWLERS[brawlerName];
        };

        const displayYesterdayBrawler = () => {
             const yesterdayBrawler = getYesterdayBrawler();
             yesterdayAnswerDiv.textContent = `Yesterday's Brawler: ${yesterdayBrawler.name}`;
        };

        // --- STATS LOGIC ---
        const loadStats = () => {
            const stats = getLocalStorage('stats', { wins: 0, streak: 0, maxStreak: 0 });
            statWins.textContent = stats.wins;
            statStreak.textContent = stats.streak;
            statMaxStreak.textContent = stats.maxStreak;
            return stats;
        };

        const saveStats = (stats) => {
            setLocalStorage('stats', stats);
        };

        const updateStreaks = (won) => {
            let stats = loadStats();
            
            if (won) {
                stats.wins += 1;
                stats.streak += 1;
                if (stats.streak > stats.maxStreak) {
                    stats.maxStreak = stats.streak;
                }
            } else {
                stats.streak = 0;
            }
            
            saveStats(stats);
            loadStats(); // Update the display
        };
        
        // --- GAME FLOW ---
        const startGame = (mode) => {
            gameMode = mode;
            guessesMade = 0;
            isGameOver = false;
            guessesBody.innerHTML = '';
            input.value = '';
            input.disabled = false;
            button.disabled = false;
            
            if (mode === 'daily') {
                targetBrawler = getDailyBrawler();
                maxGuesses = 6;
                if (isDailyCompleted()) {
                    targetBrawler = getDailyBrawler(); // Ensure targetBrawler is set
                    endGame(true, true); // Show the already completed modal
                    return;
                }
            } else { // unlimited mode
                // Randomly pick a Brawler for Unlimited mode
                const keys = Object.keys(BRAWLERS);
                const randomName = keys[Math.floor(Math.random() * keys.length)];
                targetBrawler = BRAWLERS[randomName];
                maxGuesses = 99; // Essentially unlimited
            }
            
            modeSelect.style.display = 'none';
            gameContainer.style.display = 'block';
            console.log(`[DEBUG] Game Mode: ${gameMode}, Target Brawler: ${targetBrawler.name}`); 
        };

        const compareGuess = (guessName) => {
            const guess = BRAWLERS[guessName];
            
            const result = {};
            
            // Rarity Check
            if (guess.rarity === targetBrawler.rarity) {
                result.rarity = 'clue-green';
            } else {
                const rarities = ["Starting", "Trophy Road", "Rare", "Super Rare", "Epic", "Mythic", "Legendary"];
                const guessIndex = rarities.indexOf(guess.rarity);
                const targetIndex = rarities.indexOf(targetBrawler.rarity);
                if (guessIndex < targetIndex) {
                    result.rarity = 'clue-yellow-high'; // Higher needed (represented by yellow)
                } else if (guessIndex > targetIndex) {
                    result.rarity = 'clue-yellow-low'; // Lower needed (represented by yellow)
                } else {
                    result.rarity = 'clue-red';
                }
            }
            
            // Class Check
            result.class = guess.class === targetBrawler.class ? 'clue-green' : 'clue-red';
            
            // Speed Check
            if (guess.speed === targetBrawler.speed) {
                result.speed = 'clue-green';
            } else if (Math.abs(guess.speed - targetBrawler.speed) <= 50) {
                result.speed = 'clue-yellow'; // Close speed
            } else {
                 const speeds = [620, 720, 770, 820];
                 const guessIndex = speeds.indexOf(guess.speed);
                 const targetIndex = speeds.indexOf(targetBrawler.speed);
                 if (guessIndex === -1 || targetIndex === -1) {
                     result.speed = 'clue-red'; // Should not happen with current data
                 } else if (guess.speed < targetBrawler.speed) {
                     result.speed = 'clue-yellow-high'; // Higher needed (represented by yellow)
                 } else {
                     result.speed = 'clue-yellow-low'; // Lower needed (represented by yellow)
                 }
            }
            
            // Hypercharge Check
            result.hypercharge = guess.hypercharge === targetBrawler.hypercharge ? 'clue-green' : 'clue-red';
            
            // Release Date Check
            const guessDate = new Date(guess.releaseDate);
            const targetDate = new Date(targetBrawler.releaseDate);
            
            if (guess.releaseDate === targetBrawler.releaseDate) {
                result.releaseDate = 'clue-green';
            } else if (guessDate.getMonth() === targetDate.getMonth() && guessDate.getFullYear() === targetDate.getFullYear()) {
                result.releaseDate = 'clue-green'; // Month and Year Match (Just use green for simplicity)
            } else if (guessDate.getFullYear() === targetDate.getFullYear()) {
                result.releaseDate = 'clue-yellow'; // Year Match
            } else {
                result.releaseDate = 'clue-red'; // Incorrect
            }
            
            return result;
        };

        const handleGuess = () => {
            if (isGameOver) return;

            const guessText = input.value.trim().toLowerCase();
            const guess = BRAWLERS[guessText];

            if (!guess) {
                alert("Please enter a valid Brawler name!");
                return;
            }

            guessesMade++;
            const result = compareGuess(guessText);
            const newRow = guessesBody.insertRow(0); // Insert at the top
            
            const pinUrl = result.brawler === 'clue-green' ? targetBrawler.pin : guess.pin;

            newRow.insertCell().innerHTML = `<img src="${pinUrl}" alt="${guess.name} Pin" class="pin-image" style="width: 30px; height: 30px; margin-right: 5px;"> ${guess.name}`;
            newRow.insertCell().textContent = guess.rarity;
            newRow.cells[1].className = result.rarity;
            newRow.insertCell().textContent = guess.class;
            newRow.cells[2].className = result.class;
            newRow.insertCell().textContent = `${guess.speedName} (${guess.speed})`;
            newRow.cells[3].className = result.speed;
            newRow.insertCell().textContent = guess.hypercharge ? 'Yes' : 'No';
            newRow.cells[4].className = result.hypercharge;
            newRow.insertCell().textContent = guess.releaseDate;
            newRow.cells[5].className = result.releaseDate;
            
            input.value = '';

            // Check for win condition
            if (guess.name.toLowerCase() === targetBrawler.name.toLowerCase()) {
                endGame(true);
            } else if (gameMode === 'daily' && guessesMade >= maxGuesses) {
                endGame(false);
            }
        };

        const endGame = (won, alreadyCompleted = false) => {
            isGameOver = true;
            button.disabled = true;
            input.disabled = true;
            
            let pinUrl = won ? targetBrawler.pin : 'https://cdn.brawlify.com/pins/general/Pin_214.png'; // Sad Pin URL (Hypothetical)

            if (gameMode === 'daily' && !alreadyCompleted) {
                setDailyComplete(); // Must be called before updating streaks
                updateStreaks(won);
            } else if (gameMode === 'unlimited' && !alreadyCompleted) {
                updateStreaks(won);
            }
            
            if (won) {
                modalTitle.textContent = "CORRECT! ðŸ†";
                modalMessage.textContent = alreadyCompleted ? 
                    `You already completed today's challenge (Day ${dailyDayNumber})! Play the unlimited mode or come back tomorrow.` :
                    `The Brawler was ${targetBrawler.name.toUpperCase()}! You won in ${guessesMade} try${guessesMade > 1 ? 's' : ''}!`;
            } else {
                modalTitle.textContent = "GAME OVER ðŸ˜”";
                modalMessage.textContent = `You ran out of guesses! The correct Brawler was: ${targetBrawler.name.toUpperCase()}`;

                if(gameMode === 'daily' && !alreadyCompleted) {
                    setDailyComplete();
                }
            }

            finalAnswer.textContent = targetBrawler.name.toUpperCase();
            // Display the happy or sad pin
            correctPinDisplay.innerHTML = `<img src="${pinUrl}" alt="${targetBrawler.name} Pin" class="pin-image" style="width: 50px; height: 50px; margin-top: 10px; border: 3px solid ${won ? '#4CAF50' : '#F44336'};">`;

            // Check if a revive is available and show the option if needed
            const tier = PREMIUM_TIERS[currentUser.premium];
            const remainingRevives = tier.maxRevives - currentUser.revivesUsedToday;
            if (!won && remainingRevives > 0) {
                reviveBtn.textContent = `Use Premium Revive (${remainingRevives} Remaining)`;
                reviveBtn.style.display = 'block';
                // Delay showing the main modal to give the user a moment to see the revive button
                setTimeout(() => {
                    modal.style.display = 'flex';
                }, 100);
            } else {
                reviveBtn.style.display = 'none';
                modal.style.display = 'flex';
            }
        }

        // --- EVENT LISTENERS ---
        button.addEventListener('click', handleGuess);
        input.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleGuess();
            }
        });
        closeBtn.addEventListener('click', () => {
            modal.style.display = 'none';
            if (gameMode === 'daily') {
                // Return to mode selection after daily game
                gameContainer.style.display = 'none';
                modeSelect.style.display = 'block';
                displayYesterdayBrawler();
            } else {
                // Restart unlimited game immediately
                startGame('unlimited');
            }
        });
        
        dailyBtn.addEventListener('click', () => startGame('daily'));
        unlimitedBtn.addEventListener('click', () => startGame('unlimited'));

        // --- ON LOAD EXECUTION ---
        document.addEventListener('DOMContentLoaded', () => {
            loadStats();
            displayYesterdayBrawler();
        });
        

    </script>

</body></html>
